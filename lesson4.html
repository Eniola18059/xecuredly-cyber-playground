<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Lesson 4 – Computer Networks & Security (Expanded)</title>

  <style>
    :root {
      --bg: #0b1220;
      --card: #111a2e;
      --muted: #8aa0c3;
      --text: #e7eefc;
      --accent: #6ea8ff;
      --accent-2: #7ef0c1;
      --warning: #ffdf6e;
      --danger: #ff7e93;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Noto Sans,Helvetica,Arial}
    body{color:var(--text); background:linear-gradient(135deg,#0b1220 0%,#101b34 100%); -webkit-font-smoothing:antialiased;}
    .container{max-width:1100px;margin:0 auto;padding:18px}
    header{position:sticky;top:0;z-index:20;backdrop-filter:saturate(160%) blur(8px);background:rgba(11,18,32,0.7);border-bottom:1px solid rgba(255,255,255,0.06)}
    .header-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .badge{display:inline-flex;align-items:center;gap:8px;font-weight:600;color:#0b1220;background:linear-gradient(135deg,var(--accent),var(--accent-2));padding:8px 12px;border-radius:999px;font-size:12px;text-transform:uppercase;letter-spacing:.06em}
    .hero{padding:28px 20px 8px}
    .title{font-size:clamp(28px,4vw,40px);line-height:1.15;margin:4px 0 10px}
    .subtitle{color:var(--muted);font-size:15px}
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    .chip{padding:6px 10px;background:rgba(255,255,255,0.04);border-radius:999px;font-size:12px;color:var(--muted);border:1px solid rgba(255,255,255,0.03)}
    .card{background:radial-gradient(140% 120% at 100% 0%,#132349 0%,var(--card) 45%);border:1px solid rgba(255,255,255,0.06);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25);margin-top:16px}
    .list{margin:0;padding-left:18px}
    .list li{margin:8px 0}
    .callout{background:linear-gradient(180deg,rgba(126,240,193,.06),rgba(126,240,193,.02));border:1px solid rgba(126,240,193,.14);padding:12px 14px;border-radius:12px;margin-top:10px}
    .warn{background:linear-gradient(180deg,rgba(255,223,110,.06),rgba(255,223,110,.02));border:1px solid rgba(255,223,110,.14)}
    .long-read{line-height:1.75;font-size:15px}
    .small{font-size:13px;color:var(--muted)}
    .explain{margin-top:8px;background:rgba(0,0,0,0.18);padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.02)}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(255,255,255,.12);color:var(--text);padding:10px 14px;border-radius:12px;background:rgba(255,255,255,.05);cursor:pointer;font-weight:600}
    .btn.primary{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#0b1220;border:none}

    /* base TTS bar styles (kept, extended below) */
    .tts-bar{position:fixed;right:18px;bottom:18px;z-index:9999;background:rgba(0,0,0,0.65);color:#00ffcc;padding:10px 12px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.6);font-family:'Share Tech Mono',monospace;display:flex;gap:8px;align-items:center;backdrop-filter:blur(6px);min-width:260px}
    .tts-bar button{background:linear-gradient(45deg,#ff0080,#7928ca);border:none;color:#fff;padding:8px 10px;border-radius:8px;font-weight:700;cursor:pointer;min-width:44px}
    .tts-bar .small{padding:6px 8px;min-width:36px}
    .tts-bar select,.tts-bar input[type="range"]{background:rgba(255,255,255,0.06);color:#00ffcc;border:1px solid rgba(255,255,255,0.06);padding:6px;border-radius:8px;font-family:inherit}
    .tts-highlight{background:rgba(0,255,200,0.15);transition:background 0.2s;padding:0 2px;border-radius:3px}
    footer{opacity:.7;font-size:13px;padding:30px 0 60px}
    @media (max-width:600px){.tts-bar{left:50%;transform:translateX(-50%);right:auto;bottom:12px;min-width:88%}}
    code{background:rgba(255,255,255,0.02);padding:2px 6px;border-radius:6px;font-family:monospace}

    /* === Mobile-only fixed "Back to lessons" button (avoids overlapping TTS) === */
    .mobile-back-btn { display: none; }
    @media (max-width: 1024px) {
      .mobile-back-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        position: fixed;
        left: 16px;
        bottom: calc(14px + env(safe-area-inset-bottom));
        z-index: 9998; /* below the TTS (tts-bar uses 9999) so TTS remains on top if needed */
        text-decoration: none;
        padding: 10px 14px;
        border-radius: 999px;
        background: rgba(255,255,255,0.98);
        color: #0b1220;
        font-weight: 700;
        box-shadow: 0 8px 28px rgba(2,6,23,0.36);
        -webkit-tap-highlight-color: transparent;
        transition: transform .12s ease, box-shadow .12s ease;
        pointer-events: auto;
        border: 1px solid rgba(0,0,0,0.06);
        backdrop-filter: blur(6px);
      }
      .mobile-back-btn:active { transform: translateY(1px); }
      .mobile-back-btn:focus { outline: 3px solid rgba(21,156,228,0.18); outline-offset: 2px; }
      .mobile-back-icon { font-size: 16px; line-height: 1; }
      .mobile-back-text { font-size: 14px; letter-spacing: .01em; }

      /* Phones & very narrow widths: TTS centers at bottom — lift the back button above the TTS so there's no overlap */
      @media (max-width: 820px) {
        .mobile-back-btn {
          bottom: calc(14px + env(safe-area-inset-bottom) + 70px);
          left: 12px;
          padding: 9px 12px;
        }
      }
      @media (max-width: 420px) {
        .mobile-back-btn { left: 10px; padding: 9px 12px; bottom: calc(8px + env(safe-area-inset-bottom) + 70px); }
      }
    }

    /* --- Responsive TTS: compact mode & transitions --- */
    .tts-bar { transition: all .18s ease; display:flex; align-items:center; gap:8px; }
    #ttsCollapse {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 38px;
      height: 38px;
      padding: 6px 8px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      background: linear-gradient(45deg,#ff0080,#7928ca);
      color: #fff;
    }
    .tts-controls { display: flex; gap: 8px; align-items: center; flex-wrap: nowrap; }

    @media (max-width: 820px) {
      .tts-bar {
        left: 50%;
        transform: translateX(-50%);
        right: auto;
        bottom: 12px;
        min-width: 88%;
        max-width: 92%;
        padding: 8px 10px;
        border-radius: 14px;
      }
      .tts-bar[data-compact="true"] {
        min-width: 58px;
        max-width: 58px;
        padding: 6px;
        border-radius: 999px;
        gap: 0;
      }
      .tts-bar[data-compact="true"] .tts-controls { display: none; }
      .tts-bar .label { display:none; }
      .tts-bar select, .tts-bar input[type="range"] { min-width: 36px; padding:4px; }
      .tts-bar button { min-width: 36px; padding:6px 8px; font-size:0.95rem; }
    }

    @media (min-width: 821px) and (max-width: 1024px) {
      .tts-bar { left: auto; right: 18px; bottom: 18px; min-width: 320px; transform:none; }
      .tts-bar[data-compact="true"] { min-width: 58px; max-width: 58px; padding: 6px; }
      .tts-bar[data-compact="true"] .tts-controls { display: none; }
    }
    .tts-bar:focus-within { outline: 3px solid rgba(21,156,228,0.12); outline-offset: 2px; }
    .tts-bar[data-compact="true"] #ttsCollapse { border-radius: 999px; padding: 8px; width: 38px; height: 38px; }

  </style>
</head>
<body>
  <header>
    <div class="container header-row">
      <div style="display:flex;align-items:center;gap:12px">
        <span class="badge">Lesson 4</span>
        <div>
          <strong>Computer Networks & Security — Expanded</strong>
          <div class="small muted">Definitions • OSI/TCP-IP • Scanning • Enumeration • Threats • Labs</div>
        </div>
      </div>
      <div>
        <button class="btn ghost" id="toggleTheme" title="Toggle contrast">🌗 Theme</button>
      </div>
    </div>
  </header>

  <main class="container">
    <article class="lesson-content">

      <section class="hero card">
        <h1 class="title">Computer Networks & Security</h1>
        <p class="subtitle">An expanded, classroom-ready lesson covering network fundamentals, layered models (OSI/TCP-IP), scanning & enumeration techniques, common threats, and hands-on labs.</p>
        <div class="chips">
          <span class="chip">Networking</span>
          <span class="chip">OSI Model</span>
          <span class="chip">TCP/IP</span>
          <span class="chip">Nmap</span>
          <span class="chip">DDoS</span>
        </div>
      </section>

      <!-- Table of contents -->
      <section class="card" aria-labelledby="toc">
        <h2 id="toc" class="section-title">Table of Contents</h2>
        <ol class="list">
          <li>Definition of Computer Network</li>
          <li>Applications of Computer Networks</li>
          <li>Basic Terminologies</li>
          <li>Types of Computer Network</li>
          <li>Network Architecture: P2P & Client/Server</li>
          <li>Layered Architecture, OSI & TCP/IP</li>
          <li>Physical layer details (media, topology, devices)</li>
          <li>Network Scanning & Host Discovery</li>
          <li>Enumeration techniques</li>
          <li>Common Network Threats & Attacks</li>
          <li>Hands-on Labs & Exercises</li>
          <li>Further reading & references</li>
        </ol>
      </section>

      <!-- Definition -->
      <section class="card long-read" aria-labelledby="definition">
        <h2 id="definition" class="section-title">Definition of Computer Network</h2>
        <p>
          A <strong>computer network</strong> is the interconnection of two or more computers and devices using wired or wireless media so they can communicate and share resources.
          Networks enable collaboration, access to remote services, centralized management, and efficient data exchange.
        </p>
        <div class="explain">
          <p><strong>Examples:</strong> home Wi-Fi connecting phones and laptops; corporate LAN connecting desktops to file servers; the global Internet linking billions of devices.</p>
          <p class="small muted">Key idea: networks transform isolated computers into an ecosystem where information flows.</p>
        </div>
      </section>

      <!-- Applications -->
      <section class="card long-read" aria-labelledby="applications">
        <h2 id="applications" class="section-title">Applications of Computer Networks</h2>
        <p>
          Networks are everywhere — they support communication, resource sharing, distributed computing, entertainment, e-commerce, remote access and more.
        </p>
        <ul class="list">
          <li><strong>Communication:</strong> email, chat, VoIP, video conferencing.</li>
          <li><strong>Shared resources:</strong> printers, NAS storage, databases.</li>
          <li><strong>Distributed services:</strong> web hosting, cloud computing, DNS.</li>
          <li><strong>Remote work:</strong> VPNs and remote desktop solutions.</li>
          <li><strong>Streaming & gaming:</strong> low-latency networks for multimedia delivery.</li>
        </ul>
        <div class="explain">
          <p class="small muted">When designing networks, balance throughput (bandwidth), responsiveness (latency), reliability (availability), and cost.</p>
        </div>
      </section>

      <!-- Terminology -->
      <section class="card long-read" aria-labelledby="terminology">
        <h2 id="terminology" class="section-title">Basic Terminologies</h2>
        <ul class="list">
          <li><strong>Host / Node:</strong> any device on the network (PC, server, phone).</li>
          <li><strong>IP Address:</strong> logical address (IPv4 or IPv6) used to route packets (e.g., <code>192.168.1.10</code>).</li>
          <li><strong>MAC Address:</strong> hardware address assigned to network interfaces (unique per NIC).</li>
          <li><strong>Packet:</strong> the unit of data sent across networks; contains headers, payload and sometimes trailers.</li>
          <li><strong>Bandwidth:</strong> capacity (e.g., Mbps, Gbps).</li>
          <li><strong>Latency:</strong> round-trip delay (ms).</li>
          <li><strong>Port:</strong> logical endpoint for network services (e.g., 80 for HTTP, 443 for HTTPS).</li>
        </ul>
        <div class="explain">
          <p>Analogy: IP addresses are like postal addresses, MACs like physical house identifiers, ports like rooms inside a house where specific services live.</p>
        </div>
      </section>

      <!-- Types -->
      <section class="card long-read" aria-labelledby="types-net">
        <h2 id="types-net" class="section-title">Types of Computer Network</h2>
        <p>Networks are categorized by size, geography, and purpose:</p>
        <ul class="list">
          <li><strong>PAN (Personal Area Network):</strong> short-range (Bluetooth, USB).</li>
          <li><strong>LAN (Local Area Network):</strong> a single building or campus (Ethernet switches, Wi-Fi APs).</li>
          <li><strong>MAN (Metropolitan Area Network):</strong> city-wide networks connecting multiple LANs.</li>
          <li><strong>WAN (Wide Area Network):</strong> long-distance links, often using ISP infrastructure (the Internet).</li>
          <li><strong>Cloud / Data Center networks:</strong> high-performance networks inside cloud providers or enterprise DCs.</li>
        </ul>
        <div class="explain">
          <p class="small muted">Different network types require different design choices (e.g., WANs emphasize routing and resilience; LANs emphasize switching and VLAN segmentation).</p>
        </div>
      </section>

      <!-- Architecture -->
      <section class="card long-read" aria-labelledby="architecture">
        <h2 id="architecture" class="section-title">Network Architecture: Peer-to-Peer vs Client/Server</h2>

        <h3>Peer-to-Peer (P2P)</h3>
        <p>In a P2P network, devices have equal status and can act as client and server simultaneously. Common in small home or ad-hoc networks and some file sharing systems.</p>
        <ul class="list">
          <li><strong>Advantages:</strong> low cost, simple setup, resilience — no single server dependency.</li>
          <li><strong>Disadvantages:</strong> poor centralized management, inconsistent backups, security challenges.</li>
        </ul>

        <h3>Client-Server</h3>
        <p>Clients request resources; servers provide them. This is the dominant model for enterprise and internet services.</p>
        <ul class="list">
          <li><strong>Advantages:</strong> centralized management, easier backups, better security controls.</li>
          <li><strong>Disadvantages:</strong> higher cost, single points of failure (mitigated by redundancy).</li>
        </ul>

        <div class="explain">
          <p class="small muted">Many real-world deployments are hybrid: client-server for core services and P2P for specific peer workflows.</p>
        </div>
      </section>

      <!-- Layered architecture -->
      <section class="card long-read" aria-labelledby="layered">
        <h2 id="layered" class="section-title">Layered Architecture & Why It Matters</h2>
        <p>Layering organizes network functions into separate responsibilities so systems are modular, interoperable, and easier to troubleshoot.</p>

        <h3>Core components of a layered model</h3>
        <ul class="list">
          <li><strong>Service:</strong> what a layer offers to the layer above.</li>
          <li><strong>Protocol:</strong> rules for communication with a peer layer on another host.</li>
          <li><strong>Interface:</strong> how a layer talks to the layer above/below locally.</li>
        </ul>

        <div class="explain">
          <p class="small muted">By separating concerns (e.g., routing vs reliability vs presentation), new technologies can replace individual layers without redesigning the whole stack.</p>
        </div>
      </section>

      <!-- OSI Model -->
      <section class="card long-read" aria-labelledby="osi">
        <h2 id="osi" class="section-title">OSI Model (7 Layers) — Detailed</h2>

        <table style="width:100%;border-collapse:collapse">
          <thead>
            <tr style="text-align:left">
              <th style="padding:8px;border-bottom:1px solid rgba(255,255,255,0.04)">Layer</th>
              <th style="padding:8px;border-bottom:1px solid rgba(255,255,255,0.04)">Name</th>
              <th style="padding:8px;border-bottom:1px solid rgba(255,255,255,0.04)">What it does (short)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding:8px">7</td>
              <td style="padding:8px">Application</td>
              <td style="padding:8px">Provides network services to applications (HTTP, SMTP, FTP).</td>
            </tr>
            <tr>
              <td style="padding:8px">6</td>
              <td style="padding:8px">Presentation</td>
              <td style="padding:8px">Data formatting, encryption, compression.</td>
            </tr>
            <tr>
              <td style="padding:8px">5</td>
              <td style="padding:8px">Session</td>
              <td style="padding:8px">Manages sessions and dialogs (connections, checkpoints).</td>
            </tr>
            <tr>
              <td style="padding:8px">4</td>
              <td style="padding:8px">Transport</td>
              <td style="padding:8px">End-to-end communication, flow & error control (TCP/UDP).</td>
            </tr>
            <tr>
              <td style="padding:8px">3</td>
              <td style="padding:8px">Network</td>
              <td style="padding:8px">Routing packets between networks (IP).</td>
            </tr>
            <tr>
              <td style="padding:8px">2</td>
              <td style="padding:8px">Data Link</td>
              <td style="padding:8px">Framing, MAC addressing, local error control.</td>
            </tr>
            <tr>
              <td style="padding:8px">1</td>
              <td style="padding:8px">Physical</td>
              <td style="padding:8px">Raw bit transmission over media (cables, radio).</td>
            </tr>
          </tbody>
        </table>

        <div class="explain">
          <p class="small muted">Mnemonic (top→bottom): "All People Seem To Need Data Processing". Bottom→top: "Please Do Not Throw Sausage Pizza Away".</p>
        </div>
      </section>

      <!-- Physical details -->
      <section class="card long-read" aria-labelledby="physical">
        <h2 id="physical" class="section-title">Physical Layer — Media, Topologies & Devices</h2>

        <h3>Transmission media</h3>
        <ul class="list">
          <li><strong>Wired:</strong> Twisted pair (Ethernet), Coax, Optical fiber (long distance, high bandwidth).</li>
          <li><strong>Wireless:</strong> Wi-Fi (802.11), Bluetooth, Cellular (4G/5G), Satellite.</li>
        </ul>

        <h3>Topologies</h3>
        <ul class="list">
          <li><strong>Star:</strong> devices connect to a central switch — common in modern LANs.</li>
          <li><strong>Bus:</strong> single backbone cable (legacy).</li>
          <li><strong>Ring:</strong> devices connected in a loop (token ring historically).</li>
          <li><strong>Mesh:</strong> highly redundant connections — used in resilient or large-scale networks.</li>
        </ul>

        <h3>Common devices</h3>
        <ul class="list">
          <li><strong>Hub:</strong> broadcast device (legacy; not smart).</li>
          <li><strong>Switch:</strong> frame-forwarding device using MAC tables (layer 2).</li>
          <li><strong>Router:</strong> forwards packets between networks using IP (layer 3).</li>
          <li><strong>Firewall:</strong> enforces network security policies.</li>
          <li><strong>Access Point:</strong> wireless connectivity provider.</li>
        </ul>

        <div class="explain">
          <p class="small muted">Design decisions here impact performance, resilience and security. Fiber gives speed but costs more; mesh gives redundancy at complexity cost.</p>
        </div>
      </section>

      <!-- TCP/IP -->
      <section class="card long-read" aria-labelledby="tcpip">
        <h2 id="tcpip" class="section-title">TCP/IP Protocol Suite (Internet Foundation)</h2>
        <p>
          TCP/IP is the practical model used by the Internet. It groups functions into fewer layers: Application, Transport (TCP/UDP), Internet (IP), and Network Access (link + physical).
        </p>
        <div class="explain">
          <p><strong>TCP</strong> provides reliable, ordered, error-checked delivery of a stream (used by HTTP, SMTP). <strong>UDP</strong> is connectionless and lower-overhead (used by DNS, VoIP, DNS-over-UDP, some games).</p>
          <p class="small muted">Understanding both OSI and TCP/IP helps when mapping abstract concepts to real protocols and troubleshooting problems.</p>
        </div>
      </section>

      <!-- Scanning overview -->
      <section class="card long-read" aria-labelledby="scanning">
        <h2 id="scanning" class="section-title">Network Scanning — Overview</h2>
        <p>
          Network scanning is a reconnaissance phase used to discover hosts, open ports and services that help build an attack or audit surface. It is essential in both defensive inventory work and offensive assessments.
        </p>

        <h3>Objectives</h3>
        <ul class="list">
          <li>Find live hosts (host discovery).</li>
          <li>Detect open ports and services.</li>
          <li>Fingerprint operating systems and versions.</li>
          <li>Identify potential vulnerabilities and exposures.</li>
        </ul>

        <h3>Popular tool: Nmap</h3>
        <p class="small muted">Nmap is the de-facto open-source scanner. It can discover hosts, detect services and versions, and run scripts to probe for known issues.</p>
      </section>

      <!-- Host discovery -->
      <section class="card long-read" aria-labelledby="hostdiscovery">
        <h2 id="hostdiscovery" class="section-title">Host Discovery (Techniques & Examples)</h2>
        <ul class="list">
          <li><strong>ARP Ping Scan</strong> — excellent on local networks; uses ARP to map IP↔MAC. <code>nmap -PR -sn 192.168.1.0/24</code></li>
          <li><strong>ICMP Ping Scan</strong> — sends ICMP Echo Requests. <code>nmap -PE -sn 10.0.0.0/24</code></li>
          <li><strong>TCP Ping Scan</strong> — probes specific TCP ports with SYN. <code>nmap -PS22,80 -sn target</code></li>
          <li><strong>UDP Ping Scan</strong> — useful where ICMP is blocked. <code>nmap -PU -sn target</code></li>
          <li><strong>IP Protocol Ping</strong> — pings by protocol type (<code>-PO</code>).</li>
        </ul>

        <div class="explain">
          <p class="small muted">Active scans are noisy and can trigger IDS/IPS — always have permission for offensive scans. Passive discovery (listening) is stealthier but may miss hosts that generate little traffic.</p>
        </div>
      </section>

      <!-- Port scanning -->
      <section class="card long-read" aria-labelledby="portscan">
        <h2 id="portscan" class="section-title">Port Scanning — Methods & Commands</h2>
        <p>Port scanning reveals which service endpoints (ports) a host is accepting connections on. Common TCP scans:</p>
        <ul class="list">
          <li><strong>TCP Connect / Full Open (<code>-sT</code>):</strong> completes full TCP handshake. <code>nmap -sT target</code></li>
          <li><strong>SYN / Half-open (<code>-sS</code>):</strong> sends SYN and reads response without completing handshake—stealthier. <code>nmap -sS target</code></li>
          <li><strong>Xmas Scan (<code>-sX</code>):</strong> sets FIN/PSH/URG flags to infer port state. <code>nmap -sX target</code></li>
          <li><strong>FIN / NULL / Xmas:</strong> rely on TCP stack differences; less effective on modern stacks with hardened responses.</li>
          <li><strong>UDP Scan (<code>-sU</code>):</strong> probes UDP services (slower and often requires elevated privileges). <code>nmap -sU target</code></li>
        </ul>
        <div class="explain">
          <p class="small muted">Combine scans with version detection (<code>-sV</code>) and script scanning (<code>-sC</code>) to get richer information: <code>nmap -sS -sV -sC -A target</code>.</p>
        </div>
      </section>

      <!-- Enumeration -->
      <section class="card long-read" aria-labelledby="enumeration">
        <h2 id="enumeration" class="section-title">Enumeration — Extracting Useful Data</h2>
        <p>
          Enumeration is the phase where you extract detailed information: services and versions, user accounts, shares, DNS records, and application internals. It's targeted and often requires authenticated or advanced techniques.
        </p>

        <h3>Common enumeration techniques & commands</h3>
        <ul class="list">
          <li><strong>Service enumeration / banner grabbing:</strong> <code>nmap -sV --script=banner target</code>.</li>
          <li><strong>SMB / Share enumeration:</strong> <code>enum4linux -a target</code> or <code>smbclient -L //<target></code>.</li>
          <li><strong>SNMP enumeration:</strong> <code>snmpwalk -v2c -c public target</code> (careful: community strings can leak sensitive info).</li>
          <li><strong>DNS enumeration:</strong> <code>dig +short axfr domain @ns</code>, <code>dig any</code> and subdomain enumeration tools.</li>
          <li><strong>Web enumeration:</strong> directory brute force using <code>gobuster</code> or <code>dirb</code> to find hidden endpoints.</li>
        </ul>

        <div class="explain">
          <p class="small muted">Enumeration is high value: finding a misconfigured service, a default admin account, or an open share can lead to privilege escalation inside a network.</p>
        </div>
      </section>

      <!-- Threats -->
      <section class="card long-read" aria-labelledby="threats-list">
        <h2 id="threats-list" class="section-title">Common Network Threats & Attacks</h2>

        <ul class="list">
          <li><strong>Malware:</strong> viruses, worms, trojans, ransomware — delivered via email, web drive-by, or infected USBs.</li>
          <li><strong>Phishing & Social Engineering:</strong> attackers trick users into revealing credentials or running malicious code.</li>
          <li><strong>Man-in-the-Middle (MitM):</strong> intercepting and possibly altering traffic (ARP spoofing, rogue Wi-Fi hotspots).</li>
          <li><strong>Denial-of-Service (DoS) / DDoS:</strong> overwhelming resources to make services unavailable.</li>
          <li><strong>Eavesdropping / Sniffing:</strong> capturing packets on the network (useful if traffic is unencrypted).</li>
          <li><strong>Rogue devices:</strong> unauthorized routers or access points inside a network.</li>
        </ul>

        <div class="explain">
          <p class="small muted">Real-world example: WannaCry (2017) combined a worm with ransomware and used a leaked SMB exploit to propagate, causing global disruption. It underlines why patching and segmentation matter.</p>
        </div>
      </section>

      <!-- Did you know -->
      <section class="card long-read" aria-labelledby="didyouknow">
        <h2 id="didyouknow" class="section-title">Did You Know?</h2>
        <p>
          The first message sent over ARPANET on October 29, 1969 was <strong>“LO”</strong>. The intended "LOGIN" crashed the machine after the first two letters — a small but historic start to the networked age.
        </p>
        <div class="explain">
          <p class="small muted">This anecdote is a reminder: innovation often begins imperfectly but scales rapidly — the Internet grew from a simple experiment to a global infrastructure.</p>
        </div>
      </section>

      <!-- Labs -->
      <section class="card long-read" aria-labelledby="labs">
        <h2 id="labs" class="section-title">Hands-on Labs & Exercises</h2>
        <p>Practical exercises to reinforce the theory. Always perform scanning/enumeration in a lab or with explicit permission.</p>

        <ul class="list">
          <li><strong>Lab 1 — Local host discovery:</strong> run <code>nmap -sn 192.168.1.0/24</code> on a home network to see active devices. Observe ARP table (<code>arp -a</code>).</li>
          <li><strong>Lab 2 — Port & service discovery:</strong> scan a test VM with <code>nmap -sS -sV -p1-1000 target</code> and document services and versions.</li>
          <li><strong>Lab 3 — Banner grabbing & vuln mapping:</strong> use <code>nmap --script vuln target</code> (in a controlled lab) to see automated findings and learn false-positive handling.</li>
          <li><strong>Lab 4 — Enumeration:</strong> set up a Samba share and practice using <code>smbclient</code> and <code>enum4linux</code> to enumerate shares and users.</li>
          <li><strong>Lab 5 — Packet capture:</strong> use Wireshark to capture a simple HTTP request and see headers, then repeat with HTTPS to see encryption.</li>
        </ul>

        <div class="explain">
          <p class="small muted">Tip: use virtual labs like VirtualBox or cloud sandboxes and snapshots to avoid damaging real systems. Always document commands, timestamps, and observations.</p>
        </div>
      </section>

      <!-- References -->
      <section class="card long-read" aria-labelledby="refs">
        <h2 id="refs" class="section-title">Further Reading & References</h2>
        <ul class="list">
          <li>RFCs for TCP/IP and application protocols (IETF).</li>
          <li>"Computer Networking: A Top-Down Approach" — Kurose & Ross (textbook).</li>
          <li>Nmap documentation and official site: <code>nmap.org</code>.</li>
          <li>Wireshark user guide for packet analysis.</li>
        </ul>
        <div class="explain">
          <p class="small muted">If you're building a course, pair readings with labs and short quizzes for each major section (OSI, scanning, enumeration, threats).</p>
        </div>
      </section>

      <!-- Download / Copy -->
      <section class="card" aria-labelledby="share">
        <h2 id="share" class="section-title">Download / Export</h2>
        <p class="small muted">Download the lesson as plain text or copy as Markdown for LMS handouts.</p>
        <div style="display:flex;gap:12px;align-items:center;margin-top:8px">
          <button class="btn primary" id="downloadNotes">📥 Download Notes (Text)</button>
          <button class="btn" id="copyMarkdown">📋 Copy Markdown</button>
        </div>
      </section>

    </article>

    <footer class="container">
      <p>© Learning Playground – Computer Networks & Security • Lesson 4 (Expanded)</p>
    </footer>
  </main>

  <!-- Mobile Back button (mobile & tablet only) -->
  <a href="cyber-index.html" class="mobile-back-btn" aria-label="Back to lessons (mobile)">
    <span class="mobile-back-icon" aria-hidden="true">◀</span>
    <span class="mobile-back-text">Lessons</span>
  </a>

  <!-- TTS Control Bar (responsive & collapsible) -->
  <div id="ttsBar" class="tts-bar" aria-hidden="false" data-compact="false" role="region" aria-label="Text to Speech Controls">
    <button id="ttsCollapse" class="btn small" aria-label="Collapse TTS" title="Collapse">≡</button>

    <div class="tts-controls">
      <button id="ttsPlay" title="Play">▶</button>
      <button id="ttsPause" class="small" title="Pause">⏸</button>
      <button id="ttsStop" class="small" title="Stop">⏹</button>

      <span class="label">Voice</span>
      <select id="ttsVoices" aria-label="Select voice"></select>

      <span class="label">Rate</span>
      <input id="ttsRate" type="range" min="0.6" max="2" step="0.1" value="1" />

      <span class="label">Pitch</span>
      <input id="ttsPitch" type="range" min="0.6" max="2" step="0.1" value="1" />

      <button id="ttsToggleAuto" class="small" title="Auto-read on load">A</button>
    </div>
  </div>

  <script>
    /* Theme toggle (persist) */
    const themeBtn = document.getElementById('toggleTheme');
    const keyTheme = 'lesson4-theme';
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const applyTheme = (mode) => {
      if (mode === 'light') {
        document.documentElement.style.setProperty('--bg','#f7f9ff');
        document.documentElement.style.setProperty('--card','#ffffff');
        document.documentElement.style.setProperty('--text','#0b1220');
        document.documentElement.style.setProperty('--muted','#4a5875');
      } else {
        document.documentElement.style.setProperty('--bg','#0b1220');
        document.documentElement.style.setProperty('--card','#111a2e');
        document.documentElement.style.setProperty('--text','#e7eefc');
        document.documentElement.style.setProperty('--muted','#8aa0c3');
      }
    };
    const storedTheme = localStorage.getItem(keyTheme) || (prefersDark ? 'dark' : 'light');
    applyTheme(storedTheme);
    themeBtn.addEventListener('click', () => {
      const cur = localStorage.getItem(keyTheme) || storedTheme;
      const next = cur === 'dark' ? 'light' : 'dark';
      localStorage.setItem(keyTheme, next);
      applyTheme(next);
    });

    /* Download notes as text */
    document.getElementById('downloadNotes').addEventListener('click', () => {
      const title = 'Lesson4_Computer_Networks_Notes_Expanded.txt';
      const nodes = document.querySelectorAll('.lesson-content h1, .lesson-content h2, .lesson-content p, .lesson-content li');
      const lines = [];
      nodes.forEach(n => {
        const tag = n.tagName.toLowerCase();
        if (tag === 'h1' || tag === 'h2') lines.push('\n' + n.innerText + '\n');
        else lines.push(n.innerText);
      });
      const content = lines.join('\n');
      const blob = new Blob([content], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = title; document.body.appendChild(a); a.click();
      setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 500);
    });

    /* Copy Markdown */
    document.getElementById('copyMarkdown').addEventListener('click', async () => {
      const nodes = document.querySelectorAll('.lesson-content h1, .lesson-content h2, .lesson-content p, .lesson-content li');
      let md = '';
      nodes.forEach(n => {
        const tag = n.tagName.toLowerCase();
        if (tag === 'h1') md += `# ${n.innerText}\n\n`;
        else if (tag === 'h2') md += `## ${n.innerText}\n\n`;
        else if (tag === 'li') md += `- ${n.innerText}\n`;
        else md += `${n.innerText}\n\n`;
      });
      try { await navigator.clipboard.writeText(md); alert('Copied lesson content as Markdown to clipboard.'); }
      catch(e){ alert('Could not copy to clipboard.'); }
    });

    /* TTS module (Web Speech API) */
    (function () {
      if (!('speechSynthesis' in window)) {
        console.warn('TTS not supported in this browser.');
        const bar = document.getElementById('ttsBar'); if (bar) bar.style.display = 'none';
        return;
      }

      const playBtn = document.getElementById('ttsPlay');
      const pauseBtn = document.getElementById('ttsPause');
      const stopBtn = document.getElementById('ttsStop');
      const voicesSelect = document.getElementById('ttsVoices');
      const rateInput = document.getElementById('ttsRate');
      const pitchInput = document.getElementById('ttsPitch');
      const autoBtn = document.getElementById('ttsToggleAuto');

      const lesson = document.querySelector('.lesson-content') || document.body;
      let utterance = null;
      let sentences = [];
      let currentIndex = 0;
      let readyVoices = [];

      const prefs = {
        voiceURI: localStorage.getItem('tts.voice') || '',
        rate: parseFloat(localStorage.getItem('tts.rate')) || 1,
        pitch: parseFloat(localStorage.getItem('tts.pitch')) || 1,
        auto: localStorage.getItem('tts.auto') === 'true' || false
      };
      rateInput.value = prefs.rate;
      pitchInput.value = prefs.pitch;
      autoBtn.style.opacity = prefs.auto ? '1' : '0.6';

      function populateVoices() {
        const voices = speechSynthesis.getVoices();
        readyVoices = voices;
        voicesSelect.innerHTML = '';
        voices.forEach(v => {
          const opt = document.createElement('option');
          opt.value = v.voiceURI;
          opt.textContent = `${v.name} (${v.lang})${v.default ? ' — default' : ''}`;
          voicesSelect.appendChild(opt);
        });
        if (prefs.voiceURI) {
          const found = [...voices].find(v => v.voiceURI === prefs.voiceURI);
          if (found) voicesSelect.value = prefs.voiceURI;
        }
      }

      populateVoices();
      if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = populateVoices;
      }

      function getText() {
        if (!lesson) return document.body.innerText;
        const nodes = lesson.querySelectorAll('h1,h2,p,li');
        return Array.from(nodes).map(n => n.innerText.trim()).filter(Boolean).join('.\n');
      }

      function buildSentences(text) {
        return text.split(/(?<=[.?!])\s+/);
      }

      function speakFrom(index = 0) {
        const text = getText();
        sentences = buildSentences(text);
        currentIndex = index;
        if (currentIndex >= sentences.length) return;
        speakSentence(sentences[currentIndex]);
      }

      function speakSentence(sentence) {
        if (!sentence || sentence.trim() === '') {
          currentIndex++;
          if (currentIndex < sentences.length) speakSentence(sentences[currentIndex]);
          return;
        }
        cancel();

        utterance = new SpeechSynthesisUtterance(sentence);
        const voiceURI = voicesSelect.value || prefs.voiceURI;
        const selected = readyVoices.find(v => v.voiceURI === voiceURI) || readyVoices.find(v => v.default) || readyVoices[0];
        if (selected) utterance.voice = selected;
        utterance.rate = parseFloat(rateInput.value);
        utterance.pitch = parseFloat(pitchInput.value);

        utterance.onstart = () => highlightSentence(sentence);
        utterance.onend = () => {
          currentIndex++;
          if (currentIndex < sentences.length) {
            setTimeout(() => speakSentence(sentences[currentIndex]), 120);
          } else {
            clearHighlights();
          }
        };

        speechSynthesis.speak(utterance);
      }

      function cancel() {
        if (speechSynthesis.speaking || speechSynthesis.pending) speechSynthesis.cancel();
      }
      function pause() { if (speechSynthesis.speaking) speechSynthesis.pause(); }
      function resume() { if (speechSynthesis.paused) speechSynthesis.resume(); }

      function highlightSentence(sentence) {
        clearHighlights();
        if (!lesson) return;
        const text = lesson.innerHTML;
        const safe = sentence.replace(/[.*+?^${}()|[\]\\]/g, '\\$&').trim();
        if (!safe) return;
        const regex = new RegExp(safe);
        const newHtml = text.replace(regex, `<span class="tts-highlight">${sentence}</span>`);
        if (newHtml !== text) lesson.innerHTML = newHtml;
      }

      function clearHighlights() {
        if (!lesson) return;
        const highlights = lesson.querySelectorAll('.tts-highlight');
        highlights.forEach(el => {
          const txt = el.textContent;
          el.outerHTML = txt;
        });
      }

      playBtn.addEventListener('click', () => {
        if (speechSynthesis.paused) return resume();
        if (speechSynthesis.speaking) return;
        speakFrom(0);
        savePrefs();
      });
      pauseBtn.addEventListener('click', () => {
        if (speechSynthesis.speaking) pause();
        else if (speechSynthesis.paused) resume();
      });
      stopBtn.addEventListener('click', () => {
        cancel();
        clearHighlights();
      });
      voicesSelect.addEventListener('change', () => { savePrefs(); });
      rateInput.addEventListener('change', () => savePrefs());
      pitchInput.addEventListener('change', () => savePrefs());
      autoBtn.addEventListener('click', () => {
        prefs.auto = !prefs.auto;
        localStorage.setItem('tts.auto', prefs.auto);
        autoBtn.style.opacity = prefs.auto ? '1' : '0.6';
      });

      function savePrefs() {
        localStorage.setItem('tts.voice', voicesSelect.value || '');
        localStorage.setItem('tts.rate', rateInput.value);
        localStorage.setItem('tts.pitch', pitchInput.value);
      }

      function applySavedSettings() {
        rateInput.value = prefs.rate;
        pitchInput.value = prefs.pitch;
        if (prefs.voiceURI && voicesSelect.options.length) {
          voicesSelect.value = prefs.voiceURI;
        }
      }

      let attempts = 0;
      const voiceApplyInterval = setInterval(() => {
        if (speechSynthesis.getVoices().length) {
          populateVoices();
          applySavedSettings();
          clearInterval(voiceApplyInterval);
        } else if (attempts++ > 20) {
          applySavedSettings();
          clearInterval(voiceApplyInterval);
        }
      }, 300);

      window.addEventListener('load', () => {
        setTimeout(() => {
          if (prefs.auto) {
            try {
              speakFrom(0);
            } catch (e) {
              console.warn('Auto TTS blocked by browser, user must press Play to start.');
            }
          }
        }, 700);
      });

      window.__Lesson4TTS = { speakFrom, cancel, pause, resume, getText };

    })();

    /* Responsive TTS: compact/expand toggle (preserves existing TTS behaviour) */
    (function () {
      const BAR_KEY = 'lesson4.ttsCompact';
      const ttsBar = document.getElementById('ttsBar');
      const collapseBtn = document.getElementById('ttsCollapse');

      if (!ttsBar || !collapseBtn) return;

      // Initialize from saved preference or default for small screens
      const saved = localStorage.getItem(BAR_KEY);
      const shouldCompactDefault = window.matchMedia('(max-width:820px)').matches;
      const compact = (saved === null) ? shouldCompactDefault : (saved === 'true');

      ttsBar.setAttribute('data-compact', compact ? 'true' : 'false');

      function setCompact(flag) {
        ttsBar.setAttribute('data-compact', flag ? 'true' : 'false');
        localStorage.setItem(BAR_KEY, flag ? 'true' : 'false');
      }

      collapseBtn.addEventListener('click', (e) => {
        // toggle compact mode
        const cur = ttsBar.getAttribute('data-compact') === 'true';
        setCompact(!cur);
      });

      // Listen for orientation/resize changes — auto-collapse on narrow widths unless user set preference explicitly
      let userOverrode = saved !== null;
      window.addEventListener('resize', () => {
        if (userOverrode) return;
        const narrow = window.matchMedia('(max-width:820px)').matches;
        setCompact(narrow);
      });
    })();
  </script>
</body>
</html>
